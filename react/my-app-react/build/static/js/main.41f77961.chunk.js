(this["webpackJsonpmy-app-react"]=this["webpackJsonpmy-app-react"]||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},37:function(e,t,a){"use strict";a.r(t);var n=a(9),s=a(10),l=a(13),c=a(12),r=a(0),o=a.n(r),i=a(14),m=a.n(i),u=(a(16),a(1)),d=a(4),b=a(11),h=a(19),p=a(3),g=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).changeMail=function(e){s.setState({mail:e.target.value}),localStorage.setItem("mail",e.target.value)},s.changePassword=function(e){s.setState({password:e.target.value}),localStorage.setItem("password",e.target.value)},s.formSubmited=function(e){e.preventDefault(),s.props.history.push("/List")},s.state={mail:"",password:""},s}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",{className:"ml-4"},"Identification"),o.a.createElement("hr",null),o.a.createElement("form",{onSubmit:this.formSubmited.bind(this)},o.a.createElement("div",{className:"login-form mx-4"},o.a.createElement("label",{htmlFor:"email"},"Email address"),o.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",onChange:this.changeMail,required:!0})),o.a.createElement("div",{className:"form-group mt-2 mx-4"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",onChange:this.changePassword,required:!0})),o.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-secondary ml-4"})))}}]),a}(o.a.Component),E=g;m.a.render(o.a.createElement(g,null),document.getElementById("root"));var v=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.state={listItems:[]},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getData",value:function(){var e=this,t=localStorage.getItem("mail"),a=localStorage.getItem("password"),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(t+":"+a)}},s=new Request("http://localhost:8080/discussions",n);fetch(s,n).then((function(e){return e.json()})).then((function(t){var a={listItems:[]};t.forEach((function(e){return a.listItems.push({subject:e.subject,id:e.id})})),e._isMounted&&e.setState(a)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"deleteItem",value:function(e){var t=this,a=localStorage.getItem("mail"),n=localStorage.getItem("password"),s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(a+":"+n)}},l=new Request("http://localhost:8080/discussions/"+e,s);fetch(l,s).then((function(a){var n={listItems:t.state.listItems.filter((function(t){return t.id!==e}))};t.setState(n)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"signOut",value:function(){localStorage.clear(),this.props.history.push("/")}},{key:"show",value:function(e,t){console.log(e),localStorage.setItem("id",e),localStorage.setItem("subject",t),this.props.history.push("/Show/"+e)}},{key:"render",value:function(){var e=this,t=this.state.listItems;return o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},o.a.createElement("span",{className:"navbar-brand"},"Forum de Jade"),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},o.a.createElement("ul",{className:"navbar-nav mr-auto"},o.a.createElement("li",{className:"nav-item active"},o.a.createElement("a",{className:"nav-link ml-4",href:"/New"},"New discussion",o.a.createElement("span",{className:"sr-only"})))),o.a.createElement("span",{className:"navbar-text mx-4",id:"user"},o.a.createElement(d.a,{icon:u.i,className:"mx-2"}),": ",localStorage.getItem("mail")),o.a.createElement("span",{className:"mx-4"},o.a.createElement("button",{onClick:this.signOut.bind(this),className:"btn btn-sm btn-secondary ml-4"},o.a.createElement(d.a,{icon:u.g}))))),o.a.createElement("h1",{className:"ml-4 mt-4"},"List of discussions",o.a.createElement(d.a,{icon:u.c,className:"ml-2"})),o.a.createElement("hr",null),o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"list-group"},t.map((function(t,a){return o.a.createElement("li",{key:a,className:"list-group-item d-flex justify-content-between align-items-center bg-light mb-2 border"},t.subject,o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:function(){return e.show(t.id,t.subject)}},o.a.createElement(d.a,{icon:u.d,className:"justify-content-md-center"})),o.a.createElement("button",{className:"btn btn-sm btn-danger ml-2",onClick:function(){return e.deleteItem(t.id)}},o.a.createElement(d.a,{icon:u.h,className:"justify-content-md-center"}))))})))),o.a.createElement("a",{href:"/New",className:"btn btn-secondary ml-4 mt-4",role:"button"},o.a.createElement(d.a,{icon:u.e,className:"mr-2"}),"Add a discussion"))}}]),a}(o.a.Component),f=v;m.a.render(o.a.createElement(v,null),document.getElementById("root")),b.b.add(u.g,u.i,u.c,u.e,u.d,u.h);var N=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).setSubject=function(e){s.setState({subject:e.target.value})},s.addDiscussion=function(){var e=localStorage.getItem("mail"),t=localStorage.getItem("password");fetch("http://localhost:8080/discussions/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+btoa(e+":"+t)},body:JSON.stringify({subject:s.state.subject})}).then(s.props.history.push("/List")).catch((function(e){console.log("Problem with fetch operation: "+e.message),alert("pb")}))},s.state={subject:""},s}return Object(s.a)(a,[{key:"signOut",value:function(){localStorage.clear(),this.props.history.push("/")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},o.a.createElement("span",{className:"navbar-brand"},"Forum de Jade"),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},o.a.createElement("ul",{className:"navbar-nav mr-auto"},o.a.createElement("li",{className:"nav-item active"},o.a.createElement("a",{className:"nav-link ml-4",href:"/List"},"List of discussions",o.a.createElement("span",{className:"sr-only"})))),o.a.createElement("span",{className:"navbar-text mx-4",id:"user"},o.a.createElement(d.a,{icon:u.i,className:"mx-2"}),": ",localStorage.getItem("mail")),o.a.createElement("span",{className:"mx-4"},o.a.createElement("button",{onClick:this.signOut,className:"btn btn-sm btn-secondary ml-4"},o.a.createElement(d.a,{icon:u.g}))))),o.a.createElement("h1",{className:" mt-4 ml-4"},"Create a new discussion"),o.a.createElement("hr",null),o.a.createElement("form",{id:"newDisc-form"},o.a.createElement("div",{className:"form-group mx-4"},o.a.createElement("label",{htmlFor:"subject"},"Add a subject"),o.a.createElement("textarea",{className:"form-control",id:"subject",name:"subject",rows:"1",onChange:this.setSubject,required:!0})),o.a.createElement("button",{type:"submit",className:"btn btn-primary ml-4",onClick:this.addDiscussion.bind(this)},o.a.createElement(d.a,{icon:u.e,className:"mr-2"}),"Add")))}}]),a}(o.a.Component),y=N;m.a.render(o.a.createElement(N,null),document.getElementById("root")),b.b.add(u.g,u.i,u.c,u.e);var j=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.setContent=function(e){s.setState({content:e.target.value})},s.state={id:localStorage.getItem("id"),content:"",listItems:[],subject:localStorage.getItem("subject")},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getData",value:function(){var e=this,t=localStorage.getItem("mail"),a=localStorage.getItem("password"),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(t+":"+a)}},s=new Request("http://localhost:8080/discussions/"+this.state.id+"/messages",n);fetch(s,n).then((function(e){return e.json()})).then((function(t){var a={listItems:[]};t.forEach((function(e){return a.listItems.push({date:e.date,user:e.user.mail,content:e.content,id:e.id})})),e._isMounted&&e.setState(a)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"signOut",value:function(){localStorage.clear(),this.props.history.push("/")}},{key:"addMessage",value:function(){var e=localStorage.getItem("mail"),t=localStorage.getItem("password");fetch("http://localhost:8080/discussions/"+this.state.id+"/messages",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+btoa(e+":"+t)},body:JSON.stringify({content:this.state.content})}).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"deleteItem",value:function(e){var t=this,a=localStorage.getItem("mail"),n=localStorage.getItem("password"),s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(a+":"+n)}},l=new Request("http://localhost:8080/discussions/messages/"+e,s);fetch(l,s).then((function(a){var n={listItems:t.state.listItems.filter((function(t){return t.id!==e}))};t.setState(n)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"render",value:function(){var e=this,t=this.state.listItems;return o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},o.a.createElement("span",{className:"navbar-brand"},"Forum de Jade"),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},o.a.createElement("ul",{className:"navbar-nav mr-auto"},o.a.createElement("li",{className:"nav-item active"},o.a.createElement("a",{className:"nav-link",href:"/List"},"List of discussions",o.a.createElement("span",{className:"sr-only"}))),o.a.createElement("li",{className:"nav-item active"},o.a.createElement("a",{className:"nav-link",href:"/New"},"New discussion",o.a.createElement("span",{className:"sr-only"})))),o.a.createElement("span",{className:"navbar-text mr-4",id:"user"},o.a.createElement(d.a,{icon:u.i,className:"mx-2"}),": ",localStorage.getItem("mail")),o.a.createElement("span",{className:"mx-4"},o.a.createElement("button",{onClick:this.signOut.bind(this),className:"btn btn-sm btn-secondary ml-4"},o.a.createElement(d.a,{icon:u.g}))))),o.a.createElement("h1",{className:"mt-4 ml-4"},"Discussion about: ",this.state.subject),o.a.createElement("hr",null),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group mx-4"},o.a.createElement("label",null,"Add a message"),o.a.createElement("textarea",{className:"form-control",name:"content",rows:"1",onChange:this.setContent,required:!0})),o.a.createElement("button",{type:"submit",className:"btn btn-primary ml-4 mb-4",onClick:function(){return e.addMessage()}},o.a.createElement(d.a,{icon:u.e,className:"mr-2"}),"Add a message")),o.a.createElement("table",{className:"table mx-4"},o.a.createElement("thead",{className:"thead-light"},o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"User",o.a.createElement(d.a,{icon:u.i,className:"ml-2"})),o.a.createElement("th",{scope:"col"},"Content",o.a.createElement(d.a,{icon:u.a,className:"ml-2"})),o.a.createElement("th",{scope:"col"},"Date",o.a.createElement(d.a,{icon:u.b,className:"ml-2"})),o.a.createElement("th",{scope:"col"},"Action"))),o.a.createElement("tbody",null,t.map((function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,t.user),o.a.createElement("td",null,t.content),o.a.createElement("td",null,"on ",t.date.substring(0,10)," at ",t.date.substring(11,16)),o.a.createElement("td",null,o.a.createElement("button",{className:"btn btn-sm btn-danger ml-2",onClick:function(){return e.deleteItem(t.id)}},o.a.createElement(d.a,{icon:u.h,className:"justify-content-md-center"}))))})))))}}]),a}(o.a.Component),S=j;m.a.render(o.a.createElement(j,null),document.getElementById("root")),b.b.add(u.g,u.i,u.c,u.e,u.d,u.h,u.a,u.b);var w=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return console.log("cc"),o.a.createElement("div",null,o.a.createElement(h.a,{basename:"/react"},o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/",component:I}),o.a.createElement(p.a,{path:"/Login",component:E}),o.a.createElement(p.a,{path:"/List",component:f}),o.a.createElement(p.a,{path:"/New",component:y}),o.a.createElement(p.a,{path:"/Show/:id",component:S}))))}}]),a}(o.a.Component),I=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",{className:"ml-4"},"Welcome to our discussion group"),o.a.createElement("hr",null),o.a.createElement(h.b,{to:{pathname:"/Login"},className:"btn btn-primary ml-4"},"Log in",o.a.createElement(d.a,{icon:u.f,className:"ml-2"}))," ")}}]),a}(o.a.Component);m.a.render(o.a.createElement(w,null),document.getElementById("root")),b.b.add(u.f)}},[[25,1,2]]]);
//# sourceMappingURL=main.41f77961.chunk.js.map