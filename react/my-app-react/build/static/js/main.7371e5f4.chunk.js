(this["webpackJsonpmy-app-react"]=this["webpackJsonpmy-app-react"]||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},37:function(e,t,a){"use strict";a.r(t);var n=a(9),s=a(10),l=a(13),c=a(12),o=a(0),r=a.n(o),i=a(14),m=a.n(i),u=(a(16),a(1)),d=a(4),b=a(11),h=a(19),p=a(3),g=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).changeMail=function(e){s.setState({mail:e.target.value}),localStorage.setItem("mail",e.target.value)},s.changePassword=function(e){s.setState({password:e.target.value}),localStorage.setItem("password",e.target.value)},s.formSubmited=function(e){e.preventDefault(),s.props.history.push("/ListDiscussions")},s.state={mail:"",password:""},s}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"ml-4"},"Identification"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.formSubmited.bind(this)},r.a.createElement("div",{className:"login-form mx-4"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",onChange:this.changeMail,required:!0})),r.a.createElement("div",{className:"form-group mt-2 mx-4"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",onChange:this.changePassword,required:!0})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-secondary ml-4"})))}}]),a}(r.a.Component),E=g;m.a.render(r.a.createElement(g,null),document.getElementById("root"));var v=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.state={listItems:[]},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getData",value:function(){var e=this,t=localStorage.getItem("mail"),a=localStorage.getItem("password"),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(t+":"+a)}},s=new Request("/discussions",n);fetch(s,n).then((function(e){return e.json()})).then((function(t){var a={listItems:[]};t.forEach((function(e){return a.listItems.push({subject:e.subject,id:e.id})})),e._isMounted&&e.setState(a)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"deleteItem",value:function(e){var t=this,a=localStorage.getItem("mail"),n=localStorage.getItem("password"),s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(a+":"+n)}},l=new Request("/discussions/"+e,s);fetch(l,s).then((function(a){var n={listItems:t.state.listItems.filter((function(t){return t.id!==e}))};t.setState(n)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"signOut",value:function(){localStorage.clear(),this.props.history.push("/")}},{key:"show",value:function(e,t){console.log(e),localStorage.setItem("id",e),localStorage.setItem("subject",t),this.props.history.push("/ShowDiscussion/"+e)}},{key:"render",value:function(){var e=this,t=this.state.listItems;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("span",{className:"navbar-brand"},"Forum de Jade"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("button",{className:"nav-link ml-4 btn btn-secondary text-white btn-sm",onClick:function(){return e.props.history.push("/NewDiscussion")}},"New discussion",r.a.createElement("span",{className:"sr-only"})))),r.a.createElement("span",{className:"navbar-text mx-4",id:"user"},r.a.createElement(d.a,{icon:u.i,className:"mx-2"}),": ",localStorage.getItem("mail")),r.a.createElement("span",{className:"mx-4"},r.a.createElement("button",{onClick:this.signOut.bind(this),className:"btn btn-sm btn-secondary ml-4"},r.a.createElement(d.a,{icon:u.g}))))),r.a.createElement("h1",{className:"ml-4 mt-4"},"List of discussions",r.a.createElement(d.a,{icon:u.c,className:"ml-2"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"list-group"},t.map((function(t,a){return r.a.createElement("li",{key:a,className:"list-group-item d-flex justify-content-between align-items-center bg-light mb-2 border"},t.subject,r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:function(){return e.show(t.id,t.subject)}},r.a.createElement(d.a,{icon:u.d,className:"justify-content-md-center"})),r.a.createElement("button",{className:"btn btn-sm btn-danger ml-2",onClick:function(){return e.deleteItem(t.id)}},r.a.createElement(d.a,{icon:u.h,className:"justify-content-md-center"}))))})))),r.a.createElement("button",{className:"btn btn-secondary ml-4 mt-4",onClick:function(){return e.props.history.push("/NewDiscussion")}},r.a.createElement(d.a,{icon:u.e,className:"mr-2"}),"Add a discussion"))}}]),a}(r.a.Component),f=v;m.a.render(r.a.createElement(v,null),document.getElementById("root")),b.b.add(u.g,u.i,u.c,u.e,u.d,u.h);var N=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).setSubject=function(e){s.setState({subject:e.target.value})},s.addDiscussion=function(){var e=localStorage.getItem("mail"),t=localStorage.getItem("password");fetch("/discussions/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+btoa(e+":"+t)},body:JSON.stringify({subject:s.state.subject})}).then(s.props.history.push("/ListDiscussions")).catch((function(e){console.log("Problem with fetch operation: "+e.message),alert("pb")}))},s.state={subject:""},s}return Object(s.a)(a,[{key:"signOut",value:function(){localStorage.clear(),this.props.history.push("/")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("span",{className:"navbar-brand"},"Forum de Jade"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("button",{className:"nav-link ml-4 btn btn-secondary text-white btn-sm",onClick:function(){return e.props.history.push("/ListDiscussions")}},"List of discussions",r.a.createElement("span",{className:"sr-only"})))),r.a.createElement("span",{className:"navbar-text mx-4",id:"user"},r.a.createElement(d.a,{icon:u.i,className:"mx-2"}),": ",localStorage.getItem("mail")),r.a.createElement("span",{className:"mx-4"},r.a.createElement("button",{onClick:this.signOut,className:"btn btn-sm btn-secondary ml-4"},r.a.createElement(d.a,{icon:u.g}))))),r.a.createElement("h1",{className:" mt-4 ml-4"},"Create a new discussion"),r.a.createElement("hr",null),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group mx-4"},r.a.createElement("label",{htmlFor:"subject"},"Add a subject"),r.a.createElement("textarea",{className:"form-control",id:"subject",name:"subject",rows:"1",onChange:this.setSubject,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary ml-4",onClick:this.addDiscussion.bind(this)},r.a.createElement(d.a,{icon:u.e,className:"mr-2"}),"Add")))}}]),a}(r.a.Component),y=N;m.a.render(r.a.createElement(N,null),document.getElementById("root")),b.b.add(u.g,u.i,u.c,u.e);var j=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.setContent=function(e){s.setState({content:e.target.value})},s.state={id:localStorage.getItem("id"),content:"",listItems:[],subject:localStorage.getItem("subject")},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getData",value:function(){var e=this,t=localStorage.getItem("mail"),a=localStorage.getItem("password"),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(t+":"+a)}},s=new Request("/discussions/"+this.state.id+"/messages",n);fetch(s,n).then((function(e){return e.json()})).then((function(t){var a={listItems:[]};t.forEach((function(e){return a.listItems.push({date:e.date,user:e.user.mail,content:e.content,id:e.id})})),e._isMounted&&e.setState(a)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"signOut",value:function(){localStorage.clear(),this.props.history.push("/")}},{key:"addMessage",value:function(e){var t=this,a=localStorage.getItem("mail"),n=localStorage.getItem("password");fetch("/discussions/"+this.state.id+"/messages",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+btoa(a+":"+n)},body:JSON.stringify({content:this.state.content})}).then((function(e){var a={listItems:[]};t.state.listitem.forEach((function(e){return a.listItems.push(e)})),a.listItems.push({date:e.date,user:e.user.mail,content:e.content,id:e.id}),t.setState(a)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"deleteItem",value:function(e){var t=this,a=localStorage.getItem("mail"),n=localStorage.getItem("password"),s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa(a+":"+n)}},l=new Request("/discussions/messages/"+e,s);fetch(l,s).then((function(a){var n={listItems:t.state.listItems.filter((function(t){return t.id!==e}))};t.setState(n)})).catch((function(e){console.log("Problem with fetch operation: "+e.message)}))}},{key:"render",value:function(){var e=this,t=this.state.listItems;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("span",{className:"navbar-brand"},"Forum de Jade"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("button",{className:"nav-link ml-4 btn btn-secondary text-white btn-sm",onClick:function(){return e.props.history.push("/ListDiscussions")}},"List of discussions",r.a.createElement("span",{className:"sr-only"}))),r.a.createElement("li",{className:"nav-item active"},r.a.createElement("button",{className:"nav-link ml-4 btn btn-secondary text-white btn-sm",onClick:function(){return e.props.history.push("/NewDiscussion")}},"New discussion",r.a.createElement("span",{className:"sr-only"})))),r.a.createElement("span",{className:"navbar-text mr-4",id:"user"},r.a.createElement(d.a,{icon:u.i,className:"mx-2"}),": ",localStorage.getItem("mail")),r.a.createElement("span",{className:"mx-4"},r.a.createElement("button",{onClick:this.signOut.bind(this),className:"btn btn-sm btn-secondary ml-4"},r.a.createElement(d.a,{icon:u.g}))))),r.a.createElement("h1",{className:"mt-4 ml-4"},"Discussion about: ",this.state.subject),r.a.createElement("hr",null),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group mx-4"},r.a.createElement("label",null,"Add a message"),r.a.createElement("textarea",{className:"form-control",name:"content",rows:"1",onChange:this.setContent,required:!0})),r.a.createElement("button",{className:"btn btn-primary ml-4 mb-4",onClick:function(){return e.addMessage()}},r.a.createElement(d.a,{icon:u.e,className:"mr-2"}),"Add a message")),r.a.createElement("table",{className:"table mx-4"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"User",r.a.createElement(d.a,{icon:u.i,className:"ml-2"})),r.a.createElement("th",{scope:"col"},"Content",r.a.createElement(d.a,{icon:u.a,className:"ml-2"})),r.a.createElement("th",{scope:"col"},"Date",r.a.createElement(d.a,{icon:u.b,className:"ml-2"})),r.a.createElement("th",{scope:"col"},"Action"))),r.a.createElement("tbody",null,t.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.user),r.a.createElement("td",null,t.content),r.a.createElement("td",null,"on ",t.date.substring(0,10)," at ",t.date.substring(11,16)),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-danger ml-2",onClick:function(){return e.deleteItem(t.id)}},r.a.createElement(d.a,{icon:u.h,className:"justify-content-md-center"}))))})))))}}]),a}(r.a.Component),w=j;m.a.render(r.a.createElement(j,null),document.getElementById("root")),b.b.add(u.g,u.i,u.c,u.e,u.d,u.h,u.a,u.b);var I=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:S}),r.a.createElement(p.a,{path:"/Login",component:E}),r.a.createElement(p.a,{path:"/ListDiscussions",component:f}),r.a.createElement(p.a,{path:"/NewDiscussion",component:y}),r.a.createElement(p.a,{path:"/ShowDiscussion/:id",component:w}))))}}]),a}(r.a.Component),S=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"ml-4"},"Welcome to our discussion group"),r.a.createElement("hr",null),r.a.createElement(h.b,{to:{pathname:"/Login"},className:"btn btn-primary ml-4"},"Log in",r.a.createElement(d.a,{icon:u.f,className:"ml-2"}))," ")}}]),a}(r.a.Component);m.a.render(r.a.createElement(I,null),document.getElementById("root")),b.b.add(u.f)}},[[25,1,2]]]);
//# sourceMappingURL=main.7371e5f4.chunk.js.map